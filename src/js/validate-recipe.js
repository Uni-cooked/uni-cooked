import{createError as e,eliminateError as t,ToggleConfirmButton as n}from"./utils.js";function ValidateAll(e){validateReview()&&validateCommento()||e.preventDefault()}function ToggleConfirmBtn(){let e=document.getElementById("add-comment-eval").value,t=document.getElementById("add-comment-text").value.trim();""==e||""==t||t.length>=200?n(0):n(1)}function validateReview(){let e=document.getElementById("add-comment-eval"),t=e.value;return!!t.match(/^$|^([1-9]|[12][0-9]|30)$/)||(e.value=Math.min(Math.max(t,1),30),!1)}function validateCommento(){let n=document.getElementById("add-comment-text"),i=n.value.trim(),l=document.getElementById("err-comment");if(t(l),""===i){let r=e("err-comment");r.innerText="Il testo della valutazione \xe8 necessario";let a=n.parentNode;return a.insertBefore(r,n.nextSibling),!1}if(i.length>200){let o=e("err-comment");o.innerText="il numero di caratteri nel testo della valutazione \xe8 superiore a 200";let m=n.parentNode;return m.insertBefore(o,n.nextSibling),!1}return!0}let review={"add-comment-eval":{input(){validateReview(),ToggleConfirmBtn()}},"add-comment-text":{change:validateCommento,input:ToggleConfirmBtn},"first-form":{submit:ValidateAll,reset:ToggleConfirmBtn}};function InitListeners(){for(let e in review){if(!document.getElementById(e))continue;let t=document.getElementById(e);for(let n in review[e])t.addEventListener(n,review[e][n])}}window.addEventListener("load",()=>{InitListeners(),n(0)});