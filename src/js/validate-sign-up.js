import{createError as e,eliminateError as t,ToggleConfirmButton as n,ShowPsw as a}from"./utils.js";function ValidateAll(e){validateUsername()&&validateStudent()&&validateEmail()&&validatePassword()&&validatePasswordConfirm()||e.preventDefault()}function ToggleSignUpBtn(){let e=document.getElementById("student-name-up").value.trim(),t=document.getElementById("student-cat-up"),a=document.getElementById("student-mail-up").value.trim(),l=document.getElementById("student-psw-up").value.trim(),r=document.getElementById("student-repeat-psw-up").value.trim();e.length<1||e.length>15||t.options[t.selectedIndex].hasAttribute("hidden")||a.length<1||l.length<4||""==r?n(0):n(1)}function validateUsername(){let n=document.getElementById("student-name-up"),a=n.value.trim(),l=document.getElementById("err-name");if(t(l),a.length<1){let r=e("err-name");r.innerText="Il nome utente \xe8 un campo obbligatorio";let i=n.parentNode;return i.appendChild(r),!1}if(a.length>15){let u=e("err-name");u.innerText="Il nome utente non deve essere pi\xf9 lungo di 15 caratteri";let d=n.parentNode;return d.appendChild(u),!1}if(-1==a.search(/^[a-zA-ZÀ-Ýß-ÿ0-9]{1,15}$/)){let s=e("err-name");s.innerHTML="Nome utente non valido, usa solo lettere o numeri.";let p=n.parentNode;return p.appendChild(s),!1}return!0}function validateStudent(){let n=document.getElementById("student-cat-up"),a=n.value.trim(),l=document.getElementById("err-student");if(t(l),"Seleziona una opzione"==a){let r=e("err-student");r.innerText="Seleziona una categoria";let i=n.parentNode;return i.appendChild(r),!1}return!0}function validateEmail(){let n=document.getElementById("student-mail-up"),a=n.value.trim(),l=document.getElementById("err-mail");if(t(l),a.length<1){let r=e("err-mail");r.innerHTML="L'<span lang='en'>email</span> \xe8 un campo obbligatorio";let i=n.parentNode;return i.appendChild(r),!1}if(-1==a.search(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)){let u=e("err-mail");u.innerHTML="L'<span lang='en'>email</span> scelta non \xe8 un indirizzo valido";let d=n.parentNode;return d.appendChild(u),!1}return!0}function validatePassword(){let n=document.getElementById("student-psw-up"),a=n.value.trim(),l=document.getElementById("err-psw");if(t(l),a.length<4){let r=e("err-psw");r.innerHTML="La <span lang='en'>password</span> deve essere lunga almeno 4 caratteri";let i=n.parentNode;return i.appendChild(r),!1}if(-1==a.search(/^(?=.*[a-zß-ÿ])(?=.*[A-ZÀ-Ý])(?=.*[\d])(?=.*[.,!?@+\-_€$%&^*<>]).{4,}$/)){let u=e("err-psw");u.innerHTML="La <span lang='en'>password</span> deve avere almeno una lettera maiuscola, una minuscola, un numero e un carattere speciale";let d=n.parentNode;return d.appendChild(u),!1}return!0}function validatePasswordConfirm(){let n=document.getElementById("student-repeat-psw-up"),a=document.getElementById("student-psw-up").value.trim(),l=document.getElementById("student-repeat-psw-up").value.trim(),r=document.getElementById("err-repeat-psw");if(t(r),a!=l){let i=e("err-repeat-psw");i.innerHTML="Le <span lang='en'>password</lang> non coincidono";let u=n.parentNode;return u.appendChild(i),!1}return!0}let listeners={"student-name-up":{focusout:validateUsername,input:ToggleSignUpBtn},"student-mail-up":{focusout:validateEmail,input:ToggleSignUpBtn},"student-cat-up":{focusout:validateStudent,input:ToggleSignUpBtn},"student-psw-up":{focusout:validatePassword,input:ToggleSignUpBtn},"student-repeat-psw-up":{focusout:validatePasswordConfirm,input:ToggleSignUpBtn},"show-psw":{click:function(){a(this,"student-psw-up")}},"show-psw-rep":{click:function(){a(this,"student-repeat-psw-up")}},credentials:{submit:ValidateAll,reset:ToggleSignUpBtn}};function InitListeners(){for(let e in listeners){if(!document.getElementById(e))continue;let t=document.getElementById(e);for(let n in listeners[e])t.addEventListener(n,listeners[e][n])}}window.addEventListener("load",()=>{InitListeners(),n(0)});